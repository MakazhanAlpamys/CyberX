const news = [
  {
    id: 9,
    title: 'Киберқауіпсіздікке мән беру керек - эксперты об актуальности защиты в интернете',
    date: '2024-04-18',
    timestamp: '2024-04-18T08:00:00',
    image: 'https://images.unsplash.com/photo-1563013544-824ae1b704d3?auto=format&fit=crop&q=80&w=1000',
    type: 'image',
    excerpt: 'Казахстанский телеканал 24.kz опубликовал материал о важности кибербезопасности. В Казахстане около 18 млн человек пользуются мобильным интернетом.',
    content: `
      <p>В Казахстане около 18 млн человек пользуются мобильным интернетом, что на 4% больше, чем в аналогичный период прошлого года. Эксперты отмечают, что скорость такого соединения выросла до 36 мегабит в секунду, то есть увеличилась на 50%.</p>
      
      <p>Специалисты связывают этот рост с влиянием новых технологий в сфере связи. Сейчас компании активно подключаются к системе 5G. В сфере цифровизации действительно наблюдаются значительные успехи, но нельзя не упомянуть и о последствиях.</p>
      
      <p>"Мы не можем дать 100% гарантии. Но наша цель – повысить уровень кибербезопасности. Усложнить для киберзлоумышленника процесс извлечения определенной информации из компании. Сделать его путь извлечения более дорогим", – отметил Батыржан Шакманов, специалист в области кибербезопасности.</p>
      
      <p>В Казахстане особое внимание уделяется повышению киберграмотности населения. Одна из отечественных компаний по кибербезопасности запустила бесплатный курс для граждан. На нем обучают распознавать риски и избегать мошенничества. Этот социальный проект рассчитан на долгосрочную перспективу.</p>
      
      <p>Источник: <a href="https://24.kz/kz/zha-aly-tar/ekonomika/648607-kiber-auipsizdikke-m-n-beru-kerek" target="_blank">24.kz</a></p>
    `
  },
  {
    id: 10,
    title: 'Основы кибербезопасности - разбор ключевых понятий',
    date: '2024-04-22',
    timestamp: '2024-04-22T09:30:00',
    video: 'https://www.youtube.com/embed/Tomirwcm8HQ',
    type: 'video',
    excerpt: 'Видеоматериал, объясняющий базовые концепции кибербезопасности за 2 минуты - идеально для начинающих специалистов и всех, кто заботится о своей безопасности онлайн.',
    content: `
      <p>Мы добавили в нашу базу знаний новый образовательный видеоматериал, который кратко и доступно объясняет основные понятия кибербезопасности всего за 2 минуты. Этот видеоролик идеально подходит как для начинающих специалистов, так и для обычных пользователей, желающих повысить свою киберграмотность.</p>
      
      <p>В видео рассматриваются следующие темы:</p>
      <ul>
        <li>Что такое кибербезопасность и почему она важна</li>
        <li>Основные типы кибератак</li>
        <li>Базовые меры защиты персональных данных</li>
        <li>Как распознать фишинговые атаки</li>
        <li>Важность регулярных обновлений программного обеспечения</li>
      </ul>
      
      <p>Этот материал станет отличным введением в тему кибербезопасности, особенно полезным для проведения вводных тренингов для сотрудников компаний или использования в образовательных целях.</p>
    `
  },
  {
    id: 11,
    title: 'Продвинутые техники защиты в современной кибербезопасности',
    date: '2024-04-25',
    timestamp: '2024-04-25T14:15:00',
    video: 'https://www.youtube.com/embed/S8tGWpE8lJ8',
    type: 'video',
    excerpt: 'Подробный видеоразбор современных технологий и методик, применяемых в сфере защиты информации от кибератак.',
    content: `
      <p>Для опытных специалистов по информационной безопасности и технических руководителей мы подготовили детальный видеоразбор продвинутых техник защиты, применяемых в современной киберзащите.</p>
      
      <p>Видеоматериал охватывает следующие темы:</p>
      <ul>
        <li>Передовые системы обнаружения и предотвращения вторжений</li>
        <li>Применение искусственного интеллекта в кибербезопасности</li>
        <li>Технологии блокчейн для обеспечения целостности данных</li>
        <li>Бесперебойное шифрование и управление ключами</li>
        <li>Стратегии реагирования на инциденты национального масштаба</li>
      </ul>
      
      <p>Этот материал будет особенно полезен руководителям отделов ИБ, ИТ-директорам и специалистам, отвечающим за разработку стратегии кибербезопасности в своих организациях.</p>
    `
  },
  {
    id: 12,
    title: '6 неочевидных советов по кибербезопасности, о которых вам никто не рассказывал',
    date: '2024-04-30',
    timestamp: '2024-04-30T11:00:00',
    video: 'https://www.youtube.com/embed/yeHBVyctO0c',
    type: 'video',
    excerpt: 'Нестандартные подходы к обеспечению кибербезопасности, которые редко упоминаются в обычных руководствах, но могут значительно повысить уровень защиты.',
    content: `
      <p>В нашей новой видеопубликации мы собрали шесть неочевидных, но крайне эффективных советов по кибербезопасности, которые редко упоминаются в стандартных руководствах и обучающих материалах.</p>
      
      <p>Вот некоторые из тем, рассмотренных в видео:</p>
      <ol>
        <li>Почему традиционная смена паролей может быть контрпродуктивной и что делать вместо этого</li>
        <li>Как правильно настроить домашнюю сеть для максимальной защиты всех устройств</li>
        <li>Нестандартные стратегии управления цифровым следом</li>
        <li>Почему большинство рекомендаций по безопасности не учитывают психологию пользователей</li>
        <li>Скрытые угрозы в устройствах интернета вещей и как с ними бороться</li>
        <li>Как превратить пользователей из слабого звена в первую линию защиты</li>
      </ol>
      
      <p>Эти рекомендации будут полезны как для специалистов по информационной безопасности, так и для обычных пользователей, заботящихся о защите своих данных.</p>
    `
  },
  {
    id: 13,
    title: 'Обзор требований к кибербезопасности по национальным стандартам',
    date: '2024-05-01',
    timestamp: '2024-05-01T15:30:00',
    video: 'https://www.youtube.com/embed/NV2xhtDPnZQ',
    type: 'video',
    excerpt: 'Детальный разбор нормативных требований и стандартов в области кибербезопасности, актуальных для Казахстана и стран СНГ.',
    content: `
      <p>Наши эксперты подготовили подробный видеообзор нормативных требований и стандартов в области кибербезопасности, актуальных для Казахстана и стран СНГ. Данный материал особенно важен для компаний, которые стремятся соответствовать международным и национальным стандартам защиты информации.</p>
      
      <p>В видео рассматриваются:</p>
      <ul>
        <li>Особенности концепции "Киберщит Казахстана" и её практическое применение</li>
        <li>Сравнение требований национальных стандартов с международными (ISO 27001, NIST)</li>
        <li>Обязательные мероприятия для соответствия требованиям регуляторов</li>
        <li>Типичные ошибки при внедрении систем управления информационной безопасностью</li>
        <li>Процедуры оценки и аудита на соответствие стандартам</li>
      </ul>
      
      <p>Видеоматериал будет полезен для руководителей служб ИБ, специалистов по комплаенсу и консультантов, работающих в сфере информационной безопасности.</p>
    `
  },
  {
    id: 14,
    title: 'Что ждет рынок кибербезопасности в 2025 году',
    date: '2024-05-05',
    timestamp: '2024-05-05T10:00:00',
    video: 'https://www.youtube.com/embed/ft9U83GEkyY',
    type: 'video',
    excerpt: 'Прогнозы экспертов о ключевых тенденциях и технологиях, которые будут определять развитие отрасли кибербезопасности в ближайшем будущем.',
    content: `
      <p>Команда CyberX подготовила аналитический видеоматериал с прогнозами развития рынка кибербезопасности на 2025 год. В основу прогнозов легли данные из различных международных исследований, мнения ведущих экспертов отрасли и собственный аналитический опыт нашей компании.</p>
      
      <p>Ключевые тенденции, рассмотренные в видео:</p>
      <ol>
        <li>Развитие технологий автоматизированной защиты на основе квантовых вычислений</li>
        <li>Изменение подходов к защите периметра в эпоху повсеместной удаленной работы</li>
        <li>Новые вызовы, связанные с защитой критической инфраструктуры</li>
        <li>Влияние геополитической обстановки на ландшафт киберугроз</li>
        <li>Трансформация рынка труда специалистов по кибербезопасности</li>
        <li>Новые модели инвестирования в кибербезопасность для организаций разного масштаба</li>
      </ol>
      
      <p>Видеоматериал будет полезен для стратегического планирования инвестиций в сферу информационной безопасности и развития кадрового потенциала организаций.</p>
    `
  },
  {
    id: 15,
    title: 'Расследования: технологии цифровой криминалистики',
    date: '2024-05-07',
    timestamp: '2024-05-07T13:45:00',
    video: 'https://www.youtube.com/embed/erepZi-Jtp8',
    type: 'video',
    excerpt: 'Углубленный материал о современных методах цифровой криминалистики и расследования киберинцидентов.',
    content: `
      <p>В нашей новой публикации представлен подробный обзор современных технологий и методик цифровой криминалистики, применяемых при расследовании киберинцидентов и компьютерных преступлений.</p>
      
      <p>Видеоматериал покрывает следующие аспекты:</p>
      <ul>
        <li>Современные инструменты для сбора и анализа цифровых доказательств</li>
        <li>Методики восстановления удаленных данных и расследования инцидентов "без следа"</li>
        <li>Особенности работы с защищенными и зашифрованными системами</li>
        <li>Правовые аспекты сбора цифровых доказательств и их представления</li>
        <li>Анализ поведения злоумышленников и профилирование киберпреступников</li>
        <li>Межведомственное и международное сотрудничество при расследовании киберпреступлений</li>
      </ul>
      
      <p>Этот материал будет особенно полезен для специалистов по реагированию на инциденты, экспертов по цифровой криминалистике, а также представителей правоохранительных органов, занимающихся расследованием киберпреступлений.</p>
    `
  }
];

// Функция для добавления новой новости
const addNews = (title, image, type, excerpt, content) => {
  const now = new Date();
  const id = news.length > 0 ? Math.max(...news.map(item => item.id)) + 1 : 1;
  
  const formattedDate = now.toISOString().split('T')[0];
  const timestamp = now.toISOString();
  
  // Создаем новую новость с уникальным ID
  const newItem = {
    id,
    title,
    date: formattedDate,
    timestamp,
    excerpt,
    content,
    type
  };
  
  if (type === 'image') {
    newItem.image = image;
  } else if (type === 'video') {
    newItem.video = image; // URL видео
  }
  
  // Добавляем новость в массив
  news.push(newItem);
  
  // Автоматически создаем маршрут в локальном хранилище для отслеживания созданных страниц
  // (Это симуляция, поскольку в реальном приложении маршруты создаются динамически React Router)
  const createdPages = JSON.parse(localStorage.getItem('createdNewsPages') || '[]');
  createdPages.push(id);
  localStorage.setItem('createdNewsPages', JSON.stringify(createdPages));
  
  console.log(`Автоматически создана страница для новости с ID: ${id}`);
  
  return id;
};

// Функция для удаления новости
const removeNews = (id) => {
  const index = news.findIndex(item => item.id === id);
  if (index !== -1) {
    // Удаляем новость из массива
    news.splice(index, 1);
    
    // Удаляем маршрут из локального хранилища
    const createdPages = JSON.parse(localStorage.getItem('createdNewsPages') || '[]');
    const updatedPages = createdPages.filter(pageId => pageId !== id);
    localStorage.setItem('createdNewsPages', JSON.stringify(updatedPages));
    
    console.log(`Автоматически удалена страница для новости с ID: ${id}`);
    
    return true;
  }
  return false;
};

// Функция для редактирования новости
const editNews = (id, updates) => {
  const index = news.findIndex(item => item.id === id);
  if (index !== -1) {
    // Сохраняем предыдущую версию для логирования изменений
    const previousVersion = { ...news[index] };
    
    // Обновляем новость
    news[index] = { ...news[index], ...updates };
    
    // Обновляем информацию о странице в локальном хранилище
    const updatedPages = JSON.parse(localStorage.getItem('updatedNewsPages') || '[]');
    updatedPages.push({
      id,
      timestamp: new Date().toISOString(),
      changes: Object.keys(updates).join(', '),
      previousValues: Object.keys(updates).reduce((acc, key) => {
        acc[key] = previousVersion[key];
        return acc;
      }, {})
    });
    localStorage.setItem('updatedNewsPages', JSON.stringify(updatedPages));
    
    console.log(`Обновлена страница для новости с ID: ${id}`);
    console.log('Предыдущие значения:', Object.keys(updates).reduce((acc, key) => {
      acc[key] = previousVersion[key];
      return acc;
    }, {}));
    console.log('Изменены поля:', Object.keys(updates).join(', '));
    
    return true;
  }
  return false;
};

// Функция для получения списка новостей с сортировкой и фильтрацией
const getNews = (filters = {}) => {
  let result = [...news];
  
  // Фильтрация по поисковому запросу
  if (filters.search) {
    const searchLower = filters.search.toLowerCase();
    result = result.filter(item => 
      item.title.toLowerCase().includes(searchLower) || 
      item.excerpt.toLowerCase().includes(searchLower)
    );
  }
  
  // Сортировка
  if (filters.sort) {
    switch (filters.sort) {
      case 'date-desc':
        result.sort((a, b) => new Date(b.date) - new Date(a.date));
        break;
      case 'date-asc':
        result.sort((a, b) => new Date(a.date) - new Date(b.date));
        break;
      case 'alpha-asc':
        result.sort((a, b) => a.title.localeCompare(b.title));
        break;
      case 'alpha-desc':
        result.sort((a, b) => b.title.localeCompare(a.title));
        break;
      default:
        break;
    }
  }
  
  return result;
};

export { news, addNews, removeNews, editNews, getNews }; 